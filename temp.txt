<%= render 'shared/error_messages', object: f.object %>

<%= f.label :title, "Titre" %>
<%= f.text_field :title %>

<%= f.label :content, "Contenu" %>
<%= f.text_area :content %>


<% @title = 'Admin' %>

<%= link_to 'Home', root_path %>/
<%= link_to 'Admin', admin_path %>/
<%= link_to 'News', admin_news_path %>

<%= render '/shared/flash', flash: flash %>

<h1>News:</h1>

<p><%= link_to "Ajouter une new", new_new_path %>

<ul>
<% @news.each do |new| %>
	<li>
		<%= link_to new.title.capitalize, edit_new_path(new) %>
		| <%= link_to "Supprimer", new_path(new), method: :delete, confirm: "Etes-vous sûr de vouloir supprimmer cette news?" %>
	</li>
<% end %>
<ul>


<% @title = 'Admin' %>

<%= link_to 'Home', root_path %>/
<%= link_to 'Admin', admin_path %>/
<%= link_to 'News', news_path %>/
<%= link_to 'Editer', edit_new_path(@new) %>

<h1>Editer une new</h1>

<%= form_for @new do |f| %>

	<%= render 'fields', f: f %>

	<%= f.submit "Editer" %>

<% end %>

<% @title = 'Admin' %>

<%= link_to 'Home', root_path %>/
<%= link_to 'Admin', admin_path %>/
<%= link_to 'News', admin_news_path %>/
<%= link_to 'Nouveau', new_new_path %>

<h1>Ajouter une new:</h1>

<%= form_for(@new) do |f| %>

	<%= render 'fields', f: f %>

	<%= f.submit "Ajouter" %>

<% end %>

#!/bin/env ruby
# encoding: utf-8

class NewsController < ApplicationController
	layout 'admin'
	before_filter :signed_in_user

	def admin_index
		@news = New.all
	end

	def new
		@new = New.new
	end

	def create
		@new = New.new(params[:new])
		if @new.save
			flash[:success] = "New ajoutée"
			redirect_to admin_news_path
		else
			render 'new'
		end
	end

	def edit
		@new = New.find(params[:id])
	end

	def update
	end

	def destroy
		New.find(params[:id]).destroy
		flash[:success] = 'New supprimmée'
		redirect_to admin_news_path
	end
end